{"version":3,"sources":["lib/auth-service.js","lib/AuthProvider.js","components/Navbar.js","pages/Home.js","pages/Signup.js","pages/Login.js","pages/Private.js","components/AnonRoute.js","components/PrivateRoute.js","App.js","index.js"],"names":["axiosRequestFunctions","this","auth","axios","create","baseURL","process","withCredentials","email","password","username","usersurname","age","userImgUrl","post","then","data","get","React","createContext","Consumer","Provider","withAuth","WrappedComponent","login","signup","user","logout","isLoggedin","props","Component","AuthProvider","state","isLoading","setState","catch","error","message","statusMessage","a","console","log","me","err","value","children","className","to","id","onClick","Home","handleFormSubmit","event","preventDefault","handleChange","target","name","onSubmit","type","onChange","component","rest","render","App","exact","path","Signup","Login","PrivateRoute","Private","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.d4b6187a.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nclass Auth {\r\n  // constructor() {\r\n  //   this.auth = axios.create({\r\n  //     baseURL: \"http://localhost:4000\",\r\n  //     withCredentials: true,\r\n  //   });\r\n  // }\r\n  constructor() {\r\n    this.auth = axios.create({\r\n      baseURL: process.env.REACT_APP_API_URL,\r\n      withCredentials: true,\r\n    });\r\n  };\r\n\r\n  signup({ email, password, username, usersurname, age, userImgUrl }) {\r\n    return this.auth\r\n      .post(\"/auth/signup\", { email, password, username, usersurname, age, userImgUrl })\r\n      .then(({ data }) => data);\r\n    // .then((response) => response.data);\r\n  }\r\n\r\n  login({ email, password }) {\r\n    return this.auth\r\n      .post(\"/auth/login\", { email, password })\r\n      .then(({ data }) => data);\r\n    // .then((response) => response.data);\r\n  }\r\n\r\n  logout() {\r\n    return this.auth.post(\"/auth/logout\", {}).then(({ data }) => data);\r\n    // return this.auth.post(\"/auth/logout\", {}).then((response) => response.data);\r\n  }\r\n\r\n  me() {\r\n    return this.auth.get(\"/auth/me\").then(({ data }) => data);\r\n    // return this.auth.get(\"/auth/me\").then((response) => response.data);\r\n  }\r\n}\r\n\r\nconst axiosRequestFunctions = new Auth();\r\n\r\nexport default axiosRequestFunctions;\r\n","import React, { Component } from \"react\";\r\nimport auth from \"./auth-service\"; // importamos funciones para llamadas axios a la API\r\nconst { Consumer, Provider } = React.createContext();\r\n\r\n//HOC para crear Consumer\r\nconst withAuth = (WrappedComponent) => {\r\n  return class extends Component {\r\n    render() {\r\n      return (\r\n        <Consumer>\r\n          {({ login, signup, user, logout, isLoggedin }) => {\r\n            return (\r\n              <WrappedComponent\r\n                login={login}\r\n                signup={signup}\r\n                user={user}\r\n                logout={logout}\r\n                isLoggedin={isLoggedin}\r\n                {...this.props}\r\n              />\r\n            );\r\n          }}\r\n        </Consumer>\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\n// Provider\r\nclass AuthProvider extends Component {\r\n  state = { isLoggedin: false, user: null, isLoading: true };\r\n\r\n  componentDidMount() {\r\n    auth\r\n      .me()\r\n      .then((user) =>\r\n        this.setState({ isLoggedin: true, user: user, isLoading: false })\r\n      )\r\n      .catch((err) =>\r\n        this.setState({ isLoggedin: false, user: null, isLoading: false })\r\n      );\r\n  }\r\n\r\n  signup = (user) => {\r\n    const { email, password, username, usersurname, age, userImgUrl } = user;\r\n    // lamamos a auth.signup que se conecta con la ruta del backend\r\n    auth\r\n      .signup({ email, password, username, usersurname, age, userImgUrl })\r\n      .then((user) => this.setState({ isLoggedin: true, user }))\r\n      .catch(({ error }) =>\r\n        this.setState({ message: error.data.statusMessage })\r\n      );\r\n  };\r\n\r\n  login = async (user) => {\r\n    const { email, password } = user;\r\n\r\n    try {\r\n      const user = await auth.login({ email, password });\r\n      this.setState({ isLoggedin: true, user });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  logout = async () => {\r\n    try {\r\n      await auth.logout();\r\n      this.setState({ isLoggedin: false, user: null });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { isLoading, isLoggedin, user } = this.state;\r\n    const { login, logout, signup } = this;\r\n\r\n    return isLoading ? (\r\n      <div>Loading...</div>\r\n    ) : (\r\n      /* dentro del value del provider tendremos datos que estar√°n disponibles para todos los componentes <Consumer> */\r\n      <Provider value={{ isLoggedin, user, login, logout, signup }}>\r\n        {this.props.children}\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport { Consumer, withAuth };\r\nexport default AuthProvider;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\nclass Navbar extends Component {\r\n  render() {\r\n    const { user, logout, isLoggedin } = this.props;\r\n    return (\r\n      <nav className='navbar'>\r\n        <Link to={\"/\"} id='home-btn'>\r\n          <h4>Home</h4>\r\n        </Link>\r\n        {isLoggedin ? (\r\n          <>\r\n            <p className='navbar-user'>username:{user.username}</p>\r\n            <button className='navbar-button' onClick={logout}>Logout</button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link to='/login'>\r\n              <button className='navbar-button'>Login</button>\r\n            </Link>\r\n            <br />\r\n            <Link to='/signup'>\r\n              <button className='navbar-button'>Sign Up</button>\r\n            </Link>\r\n          </>\r\n        )}\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Navbar);\r\n","import React from 'react'\r\n\r\nfunction Home() {\r\n  return (\r\n    <div> \r\n      <h1>Home Page</h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home;","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { withAuth } from '../lib/AuthProvider';\r\n\r\nclass Signup extends Component {\r\n  state = { email: \"\", password: \"\", username: \"\", usersurname: \"\", age: 0, userImgUrl: \"\" };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    const { email, password, username, usersurname, age, userImgUrl } = this.state;\r\n    //console.log('Signup -> form submit', { username, password });\r\n    this.props.signup({ email, password, username, usersurname, age, userImgUrl });\r\n  };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    const { email, password, username, usersurname, age, userImgUrl } = this.state;\r\n    return (\r\n      <div>\r\n        <h1>Sign Up</h1>\r\n\r\n        <form onSubmit={this.handleFormSubmit}>\r\n\r\n          <label>Email:</label>\r\n          <input type=\"text\" name=\"email\" value={email} onChange={this.handleChange} />\r\n\r\n          <label>Password:</label>\r\n          <input type=\"password\" name=\"password\" value={password} onChange={this.handleChange} />\r\n\r\n          <label>Name:</label>\r\n          <input type=\"text\" name=\"username\" value={username} onChange={this.handleChange} />\r\n\r\n          <label>Surname:</label>\r\n          <input type=\"text\" name=\"usersurname\" value={usersurname} onChange={this.handleChange} />\r\n\r\n          <label>Age:</label>\r\n          <input type=\"text\" name=\"age\" value={age} onChange={this.handleChange} />\r\n\r\n          {/* It lacks to upload photo, upload to Cloudinary and keep the url */}\r\n\r\n          <input type=\"submit\" value=\"Signup\" />\r\n        </form>\r\n\r\n        {/* <div>\r\n          <img photo></img>\r\n        </div> */}\r\n        \r\n        <p>Already have account?</p>\r\n        <Link to={\"/login\"}> Login</Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Signup);\r\n","import React, { Component } from \"react\";\r\nimport { withAuth } from '../lib/AuthProvider';\r\n\r\nclass Login extends Component {\r\n  state = { email: \"\", password: \"\" };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    const { email, password } = this.state;\r\n    //console.log('Login -> form submit', { username, password });\r\n    this.props.login({ email, password })\r\n  };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    const { email, password } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h1>Login</h1>\r\n\r\n        <form onSubmit={this.handleFormSubmit}>\r\n          \r\n          <label>Email:</label>\r\n          <input type=\"text\" name=\"email\" value={email} onChange={this.handleChange}/>\r\n\r\n          <label>Password:</label>\r\n          <input type=\"password\" name=\"password\" value={password} onChange={this.handleChange} />\r\n\r\n          <input type=\"submit\" value=\"Login\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Login);\r\n","import React, { Component } from \"react\";\r\nimport { withAuth } from '../lib/AuthProvider';\r\n\r\nclass Private extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Welcome {this.props.user.username}</h1>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Private);\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\nconst AnonRoute = ({ component: Component, isLoggedin, ...rest }) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        !isLoggedin ? <Component {...props} /> : <Redirect to=\"/private\" />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default withAuth(AnonRoute);\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\nconst AnonRoute = ({ component: Component, isLoggedin, ...rest }) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isLoggedin ? <Component {...props} /> : <Redirect to=\"/login\" />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default withAuth(AnonRoute);\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport { Switch } from \"react-router-dom\";\r\n\r\nimport Navbar from \"./components/Navbar\";\r\nimport Home from \"./pages/Home\";\r\nimport Signup from \"./pages/Signup\";\r\nimport Login from \"./pages/Login\";\r\nimport Private from \"./pages/Private\";\r\n\r\nimport AuthProvider from \"./lib/AuthProvider\";\r\n\r\nimport AnonRoute from \"./components/AnonRoute\";\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <AuthProvider>\r\n        <div className=\"container\">\r\n          <Navbar />\r\n\r\n          <Switch>\r\n            <AnonRoute exact path=\"/\" component={Home} />\r\n            <AnonRoute exact path=\"/signup\" component={Signup} />\r\n            <AnonRoute exact path=\"/login\" component={Login} />\r\n            <PrivateRoute exact path=\"/private\" component={Private} />\r\n          </Switch>\r\n        </div>\r\n      </AuthProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <Router>\r\n    <App />\r\n  </Router>\r\n, document.getElementById('root'));\r\n"],"sourceRoot":""}